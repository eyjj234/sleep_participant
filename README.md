# 📱 기기 추적 시스템 설정 가이드

## 🎯 시스템 개요

안드로이드 9대와 워치 10대를 추적하는 시스템입니다.
- 실시간 위치 추적
- 보유 기간 자동 계산
- 3일/5일 경과 경고
- 이동 히스토리 관리

---

## 📋 1단계: Google Sheets 설정

### 1.1 새 스프레드시트 만들기

1. [Google Sheets](https://sheets.google.com) 접속
2. 새 스프레드시트 생성
3. 이름: "기기 추적 시스템"

### 1.2 시트 3개 만들기

#### 시트 1: **현재_위치** (정확히 이 이름으로!)
- 하단 탭에서 "시트1" 클릭 → 우클릭 → "이름 바꾸기" → "현재_위치"
- `sheet1_현재위치.csv` 파일 내용을 복사해서 A1 셀에 붙여넣기

**컬럼 구조:**
```
A: 기기ID (예: A001, W001)
B: 기기타입 (안드로이드 또는 워치)
C: 현재보유자 (이름)
D: 도착일시 (YYYY-MM-DD HH:MM 형식)
E: 발송예정일 (YYYY-MM-DD 형식, 선택)
F: 상태 (보유중, 배송중 등)
G: 메모 (선택)
```

#### 시트 2: **이동_히스토리** (정확히 이 이름으로!)
- 하단 "+" 버튼 클릭해서 새 시트 추가
- 이름을 "이동_히스토리"로 변경
- `sheet2_이동히스토리.csv` 파일 내용을 복사해서 A1 셀에 붙여넣기

**컬럼 구조:**
```
A: 기록ID (자동 증가 번호)
B: 기기ID
C: 보유자
D: 도착일시
E: 발송일시
F: 보유일수
G: 다음보유자
```

#### 시트 3: **기기_마스터** (선택사항)
- 하단 "+" 버튼 클릭해서 새 시트 추가
- 이름을 "기기_마스터"로 변경
- `sheet3_기기마스터.csv` 파일 내용을 복사해서 A1 셀에 붙여넣기

---

## 🔑 2단계: Google Sheets API 설정

### 2.1 Google Cloud Console 설정

1. [Google Cloud Console](https://console.cloud.google.com/) 접속
2. 새 프로젝트 만들기
   - 프로젝트 이름: "기기추적"
   - 생성 클릭

3. **API 라이브러리에서 Google Sheets API 활성화**
   - 좌측 메뉴 → "API 및 서비스" → "라이브러리"
   - 검색: "Google Sheets API"
   - 클릭 후 "사용" 버튼 클릭

4. **API 키 만들기**
   - 좌측 메뉴 → "API 및 서비스" → "사용자 인증 정보"
   - 상단 "+ 사용자 인증 정보 만들기" → "API 키"
   - 생성된 API 키 복사해두기 (예: AIzaSyC...)

### 2.2 스프레드시트 공개 설정

1. Google Sheets로 돌아가기
2. 우측 상단 "공유" 버튼 클릭
3. "일반 액세스" 섹션에서:
   - **"링크가 있는 모든 사용자"** 선택
   - 권한: **"뷰어"** (읽기 전용)
4. "완료" 클릭

### 2.3 Spreadsheet ID 확인

스프레드시트 URL에서 ID 확인:
```
https://docs.google.com/spreadsheets/d/[이 부분이 ID입니다]/edit
```

예시:
```
URL: https://docs.google.com/spreadsheets/d/1AbCdEfGhIjKlMnOpQrStUvWxYz/edit
ID:  1AbCdEfGhIjKlMnOpQrStUvWxYz
```

---

## 🌐 3단계: 대시보드 배포

### 방법 1: GitHub Pages (권장)

1. **GitHub 저장소 만들기**
   ```bash
   git init
   git add device-tracker-dashboard.html
   git commit -m "Initial commit"
   git branch -M main
   git remote add origin https://github.com/[사용자명]/device-tracker.git
   git push -u origin main
   ```

2. **GitHub Pages 활성화**
   - 저장소 → Settings → Pages
   - Source: "main" 브랜치 선택
   - 폴더: "/ (root)" 선택
   - Save 클릭
   - 5분 후 `https://[사용자명].github.io/device-tracker/device-tracker-dashboard.html`에서 접속 가능

### 방법 2: 로컬에서 바로 사용

1. `device-tracker-dashboard.html` 파일을 더블클릭
2. 브라우저에서 바로 실행됨

### 방법 3: Netlify (간편 배포)

1. [Netlify](https://www.netlify.com/) 접속
2. "Add new site" → "Deploy manually"
3. `device-tracker-dashboard.html` 파일을 드래그 앤 드롭
4. 자동으로 URL 생성됨

---

## ⚙️ 4단계: 대시보드 설정

1. 대시보드 접속
2. 설정 화면이 나타남:
   - **Spreadsheet ID**: 2.3단계에서 복사한 ID 입력
   - **API Key**: 2.1단계에서 복사한 API 키 입력
3. "저장하고 불러오기" 버튼 클릭
4. 대시보드가 자동으로 로드됨!

---

## 📝 5단계: 일상적인 사용 방법

### 택배 발송 시

1. Google Sheets의 **현재_위치** 시트 열기
2. 해당 기기 행 찾기
3. 수정할 정보:
   - **C열 (현재보유자)**: 새 보유자 이름
   - **D열 (도착일시)**: 오늘 날짜 + 시간 (예: 2025-11-25 14:30)
   - **E열 (발송예정일)**: 다음 발송 예정일 (예: 2025-11-27)
   - **F열 (상태)**: "보유중"

4. **이동_히스토리** 시트에 기록 추가:
   - 새 행 추가
   - 기록ID: 다음 번호
   - 기기ID: 해당 기기 ID
   - 보유자: 이전 보유자
   - 도착일시: 이전 도착일시
   - 발송일시: 오늘 날짜 + 시간
   - 보유일수: 계산된 일수
   - 다음보유자: 새 보유자

### 대시보드 확인

- 대시보드는 **30초마다 자동 새로고침**
- 수동 새로고침: 브라우저 F5키
- 경고 표시:
  - 🟡 주황색: 3일 이상 보유
  - 🔴 빨간색: 5일 이상 보유

---

## 🎨 대시보드 기능

### 통계 카드
- 전체 안드로이드 개수
- 전체 워치 개수
- 3일 이상 보유 기기 수
- 5일 이상 보유 기기 수

### 기기 카드
- 기기 타입 (안드로이드/워치)
- 현재 보유자
- 도착일시
- 발송예정일
- 경과 일수
- 상태 및 메모

### 히스토리 테이블
- 최근 20건의 이동 기록
- 보유자별 보유 기간 확인

---

## 💡 팁 & 주의사항

### ✅ DO (권장사항)

1. **날짜 형식 통일**
   - 항상 `YYYY-MM-DD HH:MM` 형식 사용
   - 예: `2025-11-25 14:30`

2. **즉시 업데이트**
   - 택배 발송하자마자 시트 업데이트
   - 히스토리 기록 빠뜨리지 않기

3. **주기적 확인**
   - 매일 대시보드 확인
   - 3일 이상 경고 나온 기기 우선 처리

4. **백업**
   - 주기적으로 Google Sheets 복사본 만들기
   - 파일 → 사본 만들기

### ❌ DON'T (주의사항)

1. **시트 이름 변경 금지**
   - `현재_위치`, `이동_히스토리` 이름 유지 필수

2. **컬럼 순서 변경 금지**
   - A, B, C... 순서대로 유지

3. **헤더 행 삭제 금지**
   - 첫 번째 행(헤더)은 반드시 유지

4. **API 키 공개 금지**
   - GitHub에 업로드 시 API 키 노출 주의

---

## 🔧 문제 해결

### "데이터를 찾을 수 없습니다"
- 시트 이름이 정확한지 확인 (`현재_위치`, `이동_히스토리`)
- 스프레드시트가 공개 설정되어 있는지 확인
- Spreadsheet ID가 정확한지 확인

### "데이터를 불러오는 중 오류"
- API 키가 유효한지 확인
- Google Sheets API가 활성화되어 있는지 확인
- 브라우저 콘솔(F12)에서 에러 메시지 확인

### 대시보드가 안 보임
- 브라우저 캐시 삭제
- 시크릿 모드에서 테스트
- 다른 브라우저로 시도

---

## 📱 모바일에서 사용

1. 대시보드 URL을 북마크에 추가
2. 홈 화면에 추가 (Safari/Chrome "홈 화면에 추가")
3. 언제 어디서나 실시간 확인 가능!

---

## 🚀 고급 기능 (선택사항)

### 자동 알림 설정 (Google Apps Script)

Google Sheets에서 Apps Script로 자동 알림 설정 가능:
- 5일 이상 보유 시 이메일 알림
- 매일 아침 리포트 발송
- Slack/Discord 웹훅 연동

### 데이터 시각화

Google Sheets의 차트 기능 활용:
- 보유자별 평균 보유 기간
- 기기별 이동 횟수
- 월별 이동 통계

---

## 📞 지원

문제가 발생하면:
1. 브라우저 콘솔(F12) 에러 확인
2. Google Sheets 권한 재확인
3. API 키 재생성 시도

---

**즐거운 기기 추적 되세요! 📱⌚**
